.IFJcode24
LABEL main
CREATEFRAME
PUSHFRAME
WRITE string@Enter\032a\032number\032to\032calculate\032factorial:\010
DEFVAR LF@input
DEFVAR LF@%retval
READ LF@%retval int
MOVE LF@input LF@%retval
PUSHS nil@nil
PUSHS LF@input
EQS
NOTS
PUSHS bool@true
JUMPIFNEQS $else_0
DEFVAR LF@val
PUSHS LF@input
POPS LF@val
PUSHS LF@val
PUSHS int@0
LTS
PUSHS bool@true
JUMPIFNEQS $else_1
WRITE string@Factorial\032of\032negative\032numbers\032is\032not\032defined\010
JUMP $endif_1
LABEL $else_1
DEFVAR LF@result
PUSHS LF@val
CALL factorial
POPS LF@result
WRITE string@Factorial\032of\032
WRITE LF@val
WRITE string@\032is\032
WRITE LF@result
WRITE string@\010
LABEL $endif_1
JUMP $endif_0
LABEL $else_0
WRITE string@Factorial\032for\032null\032is\032not\032defined\010
LABEL $endif_0
POPFRAME
EXIT int@0
LABEL factorial
CREATEFRAME
PUSHFRAME
DEFVAR LF@n
POPS LF@n
PUSHS LF@n
PUSHS int@0
PUSHS LF@n
PUSHS int@0
EQS
DEFVAR LF@temp_condition
POPS LF@temp_condition
PUSHS LF@temp_condition
PUSHS bool@true
JUMPIFNEQS $else_2
PUSHS int@1
JUMP $endif_2
LABEL $else_2
PUSHS LF@n
PUSHS LF@n
PUSHS int@1
SUBS
CALL factorial
MULS
LABEL $endif_2
POPFRAME
RETURN
CALL main
EXIT int@0
